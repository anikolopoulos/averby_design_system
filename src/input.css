@import "tailwindcss";

/* Source detection for v4.1 */
@source "./index.html";

@theme {
  /* Primary (orange) */
  --color-primary-50: #FFF7ED;
  --color-primary-100: #FFEDD5;
  --color-primary-200: #FED7AA;
  --color-primary-300: #FDBA74;
  --color-primary-400: #FB923C;
  --color-primary-500: #F97316;
  --color-primary-600: #EA580C;
  --color-primary-700: #C2410C;
  --color-primary-800: #9A3412;
  --color-primary-900: #7C2D12;

  /* Accent (teal) */
  --color-accent-50: #F0FDFA;
  --color-accent-100: #CCFBF1;
  --color-accent-200: #99F6E4;
  --color-accent-300: #5EEAD4;
  --color-accent-400: #2DD4BF;
  --color-accent-500: #14B8A6;
  --color-accent-600: #0D9488;
  --color-accent-700: #0F766E;
  --color-accent-800: #115E59;
  --color-accent-900: #134E4A;

  /* Neutral (grays) */
  --color-neutral-50: #F9FAFB;
  --color-neutral-100: #F3F4F6;
  --color-neutral-200: #E5E7EB;
  --color-neutral-300: #D1D5DB;
  --color-neutral-400: #9CA3AF;
  --color-neutral-500: #6B7280;
  --color-neutral-600: #4B5563;
  --color-neutral-700: #374151;
  --color-neutral-800: #1F2937;
  --color-neutral-900: #111827;

  /* Info (sky) */
  --color-info-50: #F0F9FF;
  --color-info-100: #E0F2FE;
  --color-info-200: #BAE6FD;
  --color-info-300: #7DD3FC;
  --color-info-400: #38BDF8;
  --color-info-500: #0EA5E9;
  --color-info-600: #0284C7;
  --color-info-700: #0369A1;
  --color-info-800: #075985;
  --color-info-900: #0C4A6E;

  /* Success (emerald) */
  --color-success-50: #ECFDF5;
  --color-success-100: #D1FAE5;
  --color-success-200: #A7F3D0;
  --color-success-300: #6EE7B7;
  --color-success-400: #34D399;
  --color-success-500: #10B981;
  --color-success-600: #059669;
  --color-success-700: #047857;
  --color-success-800: #065F46;
  --color-success-900: #064E3B;

  /* Error (red) */
  --color-error-50: #FEF2F2;
  --color-error-100: #FEE2E2;
  --color-error-200: #FECACA;
  --color-error-300: #FCA5A5;
  --color-error-400: #F87171;
  --color-error-500: #EF4444;
  --color-error-600: #DC2626;
  --color-error-700: #B91C1C;
  --color-error-800: #991B1B;
  --color-error-900: #7F1D1D;

  /* Warning (amber) */
  --color-warning-50: #FFFBEB;
  --color-warning-100: #FEF3C7;
  --color-warning-200: #FDE68A;
  --color-warning-300: #FCD34D;
  --color-warning-400: #FBBF24;
  --color-warning-500: #F59E0B;
  --color-warning-600: #D97706;
  --color-warning-700: #B45309;
  --color-warning-800: #92400E;
  --color-warning-900: #78350F;

  /* Font family */
  --font-sans: 'Inter', 'system-ui', '-apple-system', sans-serif;

  /* Custom animations */
  --animate-skeleton-pulse: skeleton-pulse 1.5s ease-in-out infinite;
  --animate-toast-enter: toast-enter 300ms ease-out;
  --animate-toast-exit: toast-exit 200ms ease-in;

  /* Custom shadows */
  --shadow-float: 0 10px 30px -10px rgba(0, 0, 0, 0.25);

  /* Custom backdrop blur */
  --backdrop-blur-xs: blur(2px);
}

@keyframes skeleton-pulse {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes toast-enter {
  0% { transform: translateY(100%); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}

@keyframes toast-exit {
  0% { transform: translateX(0); opacity: 1; }
  100% { transform: translateX(100%); opacity: 0; }
}

/* Touch target minimum for mobile interactions */
@media (max-width: 767px) {
  button {
    min-width: 48px !important;
    min-height: 48px !important;
  }
}

/* Drawer slide animations and visibility */
.drawer-slide {
  transition: transform 280ms cubic-bezier(0.2, 0.8, 0.2, 1);
}

/* Left drawer slides from left */
.drawer-slide-left {
  transform: translateX(-100%);
  pointer-events: none;
}

.drawer-slide-left[data-open="true"] {
  transform: translateX(0);
  pointer-events: auto;
}

/* Right drawer slides from right */
.drawer-slide-right {
  right: 0;
  transform: translateX(100%);
  pointer-events: none;
}

.drawer-slide-right[data-open="true"] {
  transform: translateX(0);
  pointer-events: auto;
}

/* Width-based drawer for inset */
.drawer-slide-width {
  transition: width 280ms cubic-bezier(0.2, 0.8, 0.2, 1);
  width: 0;
}

.drawer-slide-width[data-open="true"] {
  width: 22rem;
}

/* Scrim pointer events management */
#scrim {
  pointer-events: none;
}

#scrim[data-open="true"] {
  pointer-events: auto;
}

/* Rail collapse functionality */
[data-rail] {
  transition: width 300ms cubic-bezier(0.2, 0.8, 0.2, 1), transform 300ms cubic-bezier(0.2, 0.8, 0.2, 1);
}

/* Override Tailwind width classes with higher specificity */
[data-rail][data-collapsed="true"] {
  width: 0 !important;
  min-width: 0 !important;
  max-width: 0 !important;
  overflow: hidden !important;
  border-right-width: 0 !important;
}

[data-rail][data-collapsed="true"] .rail-logo,
[data-rail][data-collapsed="true"] .nav-label {
  opacity: 0 !important;
  transform: translateX(-100%) !important;
  transition: opacity 150ms ease-out, transform 150ms ease-out;
}

/* Ensure expanded state visibility */
[data-rail]:not([data-collapsed="true"]) .rail-logo,
[data-rail]:not([data-collapsed="true"]) .nav-label {
  opacity: 1 !important;
  transform: translateX(0) !important;
  transition: opacity 200ms ease-in, transform 200ms ease-in;
}

/* All component styles are now handled directly with Tailwind utilities */

/* Temporary dark mode styles - for immediate fix while Tailwind v4.1 dark mode is configured */
.dark {
  color-scheme: dark;
}

/* Essential dark mode background and text colors */
.dark .bg-white {
  background-color: var(--color-neutral-900) !important;
}

.dark .bg-neutral-50 {
  background-color: var(--color-neutral-900) !important;
}

.dark .bg-neutral-100 {
  background-color: var(--color-neutral-800) !important;
}

.dark .bg-neutral-200 {
  background-color: var(--color-neutral-900) !important;
}

.dark .bg-neutral-900\/60 {
  background-color: rgba(17, 24, 39, 0.6) !important;
}

.dark .bg-neutral-800\/60 {
  background-color: rgba(31, 41, 55, 0.6) !important;
}

.dark .bg-neutral-50\/70 {
  background-color: rgba(17, 24, 39, 0.7) !important;
}

.dark .bg-neutral-900\/70 {
  background-color: rgba(17, 24, 39, 0.7) !important;
}

.dark .bg-neutral-800\/70 {
  background-color: rgba(31, 41, 55, 0.7) !important;
}

/* Dark mode backdrop overlays */
.dark .bg-black\/20 {
  background-color: rgba(0, 0, 0, 0.2) !important;
}

.dark .bg-black\/40 {
  background-color: rgba(0, 0, 0, 0.4) !important;
}

/* Text colors */
.dark .text-neutral-900 {
  color: var(--color-neutral-100) !important;
}

.dark .text-neutral-700 {
  color: var(--color-neutral-200) !important;
}

.dark .text-neutral-200 {
  color: var(--color-neutral-200) !important;
}

.dark .text-neutral-100 {
  color: var(--color-neutral-100) !important;
}

.dark .text-neutral-50 {
  color: var(--color-neutral-50) !important;
}

/* Border colors */
.dark .border-neutral-200\/70 {
  border-color: rgba(75, 85, 99, 0.7) !important;
}

.dark .border-neutral-800 {
  border-color: var(--color-neutral-800) !important;
}

.dark .border-neutral-700 {
  border-color: var(--color-neutral-700) !important;
}

/* Hover states */
.dark .hover\:bg-neutral-900\/5:hover {
  background-color: rgba(75, 85, 99, 0.4) !important;
}

.dark .hover\:bg-neutral-700\/40:hover {
  background-color: rgba(75, 85, 99, 0.4) !important;
}

.dark .hover\:bg-neutral-100:hover {
  background-color: rgba(75, 85, 99, 0.7) !important;
}

.dark .hover\:bg-neutral-800\/70:hover {
  background-color: rgba(31, 41, 55, 0.7) !important;
}

/* Primary colors in dark mode */
.dark .bg-primary-50 {
  background-color: rgba(124, 45, 18, 0.3) !important;
}

.dark .bg-primary-900\/30 {
  background-color: rgba(124, 45, 18, 0.3) !important;
}

.dark .text-primary-600 {
  color: var(--color-primary-300) !important;
}

.dark .text-primary-300 {
  color: var(--color-primary-300) !important;
}

/* Placeholder colors */
.dark .placeholder-neutral-400::placeholder {
  color: var(--color-neutral-400) !important;
}

/* Bottom submenu drawer animations */
[data-submenu-panel] {
  transition: transform 280ms cubic-bezier(0.2, 0.8, 0.2, 1);
  transform: translateY(100%);
}

[data-submenu-panel][data-open="true"] {
  transform: translateY(0);
}

[data-submenu-backdrop] {
  transition: opacity 280ms ease-out;
  opacity: 0;
  pointer-events: none;
}

[data-submenu-backdrop][data-open="true"] {
  opacity: 1;
  pointer-events: auto;
}

/* ===== UNIFIED NAVIGATION SYSTEM ===== */

@layer components {
  /* Base navigation styles */
  .nav-item {
  transition: all 150ms ease-out;
  @apply flex flex-col items-center justify-center text-center rounded-xl min-h-[48px] min-w-[48px];
}

/* Desktop rail navigation */
.nav-rail {
  @apply hidden md:flex flex-col w-24 bg-neutral-200 border-r border-neutral-200/70 sticky left-0 top-0 h-screen z-50 pt-2 overflow-y-auto;
  box-shadow: 4px 0 12px -8px rgba(0, 0, 0, 0.15);
  transition: width 300ms cubic-bezier(0.2, 0.8, 0.2, 1);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* Dark mode styles for rail */
.dark .nav-rail {
  @apply bg-neutral-900/90 border-neutral-700/60;
  box-shadow: 4px 0 20px -8px rgba(0, 0, 0, 0.7), inset 1px 0 0 rgba(255, 255, 255, 0.05);
}

.nav-rail .nav-item {
  @apply px-2 py-3 text-[13px] font-semibold text-neutral-700 hover:bg-neutral-100/60 focus:bg-neutral-100/80;
  transition: all 180ms ease-out;
}

.dark .nav-rail .nav-item {
  @apply text-neutral-200 hover:bg-neutral-700/50 focus:bg-neutral-700/60;
}

/* Enhanced hover and focus states for dark mode */
.nav-rail .nav-item:hover {
  @apply transform scale-[1.02];
}

.nav-rail .nav-item:focus {
  @apply ring-2 ring-primary-500/50 ring-offset-2 ring-offset-transparent;
  outline: none;
}

.dark .nav-rail .nav-item:focus {
  @apply ring-primary-400/60 ring-offset-neutral-900;
}

.nav-rail .nav-item.active {
  @apply bg-primary-50 text-primary-600 shadow-sm;
  border: 1px solid transparent;
}

.dark .nav-rail .nav-item.active {
  @apply bg-primary-900/40 text-primary-300 shadow-primary-900/30;
}

/* Enhanced active state for dark mode */
.dark .nav-rail .nav-item.active {
  background: linear-gradient(135deg, 
    rgba(251, 146, 60, 0.15) 0%, 
    rgba(251, 146, 60, 0.08) 100%);
  border-color: rgba(251, 146, 60, 0.2);
  box-shadow: 0 2px 8px rgba(251, 146, 60, 0.15), 
              inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.nav-rail .nav-item .nav-icon {
  @apply w-6 h-6 mb-1;
}

.nav-rail .nav-label {
  @apply text-[13px] font-bold;
}
}

@layer components {
  /* Mobile bottom navigation */
  .nav-bottom {
  @apply md:hidden fixed bottom-0 left-0 right-0 z-50 bg-neutral-50/95 dark:bg-neutral-900/95 border-t border-neutral-200/80 dark:border-neutral-700/60 flex items-center justify-between px-4 py-2;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

/* Enhanced dark mode shadow for bottom nav */
.dark .nav-bottom {
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3), 
              inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.nav-bottom .nav-item {
  @apply text-xs font-medium transition-all duration-180 p-1 hover:bg-neutral-100/60 dark:hover:bg-neutral-700/50 focus:bg-neutral-100/80 dark:focus:bg-neutral-700/60;
  min-width: 48px;
  min-height: 48px;
  border-radius: 12px;
}

/* Enhanced hover effects for mobile nav items */
.nav-bottom .nav-item:hover {
  @apply transform scale-[1.05];
}

.nav-bottom .nav-item:focus {
  @apply ring-2 ring-primary-500/50 ring-offset-2 ring-offset-transparent dark:ring-primary-400/60 dark:ring-offset-neutral-900;
  outline: none;
}

.nav-bottom .nav-item.active {
  @apply text-primary-600 dark:text-primary-300 bg-primary-50/80 dark:bg-primary-900/40 shadow-sm dark:shadow-primary-900/30;
  border: 1px solid transparent;
}

/* Enhanced active state for mobile dark mode */
.dark .nav-bottom .nav-item.active {
  background: linear-gradient(135deg, 
    rgba(251, 146, 60, 0.18) 0%, 
    rgba(251, 146, 60, 0.10) 100%);
  border-color: rgba(251, 146, 60, 0.25);
  box-shadow: 0 2px 8px rgba(251, 146, 60, 0.2), 
              inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.nav-bottom .nav-item:not(.active) {
  @apply text-neutral-600 dark:text-neutral-400;
}

.nav-bottom .nav-item .nav-icon {
  @apply text-lg mb-1;
}

/* Responsive submenu handling */
.submenu-drawer {
  @apply fixed bottom-0 left-0 right-0 z-40 md:hidden;
}

.submenu-drawer[data-open="true"] .submenu-panel {
  transform: translateY(0);
}

.submenu-panel {
  @apply bg-white/95 dark:bg-neutral-900/95 border-t border-neutral-200/60 dark:border-neutral-700/40 rounded-t-2xl shadow-2xl dark:shadow-black/50;
  transition: transform 280ms cubic-bezier(0.2, 0.8, 0.2, 1);
  transform: translateY(100%);
  margin-bottom: 64px;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

/* Enhanced dark mode styling for submenu panel */
.dark .submenu-panel {
  box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.4), 
              0 -2px 8px rgba(0, 0, 0, 0.2),
              inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

/* Submenu content styling */
.submenu-content {
  position: relative;
}

.submenu-content::before {
  content: '';
  position: absolute;
  top: 0;
  left: 24px;
  right: 24px;
  height: 1px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(0, 0, 0, 0.1) 20%, 
    rgba(0, 0, 0, 0.1) 80%, 
    transparent 100%);
}

.dark .submenu-content::before {
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(255, 255, 255, 0.08) 20%, 
    rgba(255, 255, 255, 0.08) 80%, 
    transparent 100%);
}

/* Enhanced submenu backdrop */
[data-submenu-backdrop] {
  background: rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
}

.dark [data-submenu-backdrop] {
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

/* Navigation state management */
.nav-item:active {
  transform: scale(0.98);
}

/* Theme toggle positioning */
.theme-toggle {
  @apply mt-auto shrink-0 p-2 grid place-items-center;
}

/* Theme toggle enhanced styling */
.theme-toggle .nav-item {
  @apply min-h-[44px] min-w-[44px] relative;
  border: 1px solid transparent;
}

/* Enhanced theme toggle hover and focus states */
.theme-toggle .nav-item:hover {
  @apply bg-neutral-100/70 dark:bg-neutral-700/60 border-neutral-200/50 dark:border-neutral-600/50;
  transform: scale(1.05);
}

.theme-toggle .nav-item:focus {
  @apply ring-2 ring-primary-500/50 ring-offset-2 ring-offset-transparent dark:ring-primary-400/60 dark:ring-offset-neutral-900;
  outline: none;
}

/* Theme toggle icon transition effects */
.theme-toggle .nav-item .nav-icon {
  transition: all 200ms ease-out;
}

.theme-toggle .nav-item:hover .nav-icon {
  transform: rotate(15deg) scale(1.1);
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

.dark .theme-toggle .nav-item:hover .nav-icon {
  filter: drop-shadow(0 2px 8px rgba(251, 146, 60, 0.3));
}

/* Theme toggle active state */
.theme-toggle .nav-item:active {
  transform: scale(0.95);
}

/* Theme toggle press animation */
.theme-toggle .nav-item[aria-pressed="true"] .nav-icon {
  transform: rotate(180deg) scale(1.1);
}

/* Topbar theme toggle animations */
.theme-toggle-btn .theme-toggle-icon {
  transition: all 200ms ease-out;
}

.theme-toggle-btn:hover .theme-toggle-icon {
  transform: rotate(15deg) scale(1.1);
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

.dark .theme-toggle-btn:hover .theme-toggle-icon {
  filter: drop-shadow(0 2px 8px rgba(251, 146, 60, 0.3));
}

.theme-toggle-btn:active {
  transform: scale(0.95);
}

.theme-toggle-btn[aria-pressed="true"] .theme-toggle-icon {
  transform: rotate(180deg) scale(1.1);
}

}